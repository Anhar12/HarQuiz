{% extends "base.html" %}

{% block content %}

<section class="h-[89vh] bg-white relative overflow-hidden body-font flex items-center">

    <div class="relative mx-auto px-6 md:px-12 py-12 grid md:grid-cols-2 gap-10 items-center">

        <!-- TEXT -->
        <div class="text-teal-900 z-10 space-y-6">
            <h1 class="text-3xl md:text-5xl font-bold head-font leading-tight text-teal-700">
                Platform Quiz Modern,
                <span class="text-[#0a3234]"> Belajar Lebih Efektif</span>
            </h1>

            <p class="text-lg body-font text-justify text-teal-800 max-w-xl">
                Selamat datang di <span class="font-semibold text-[#0a3234]">HarQuiz</span>.  
                Buat, kerjakan, dan kelola quiz kamu sendiri dengan tampilan bersih dan responsif.
                Cocok untuk mahasiswa, pelajar, atau siapa pun yang butuh latihan cepat dan rapi.
            </p>

            <p class="text-md body-font text-teal-700 text-justify max-w-xl">
                Sistemnya ringan dan antarmukanya sederhana, jadi kamu bisa fokus belajar tanpa ribet.
                Dan oh ya, kami juga punya fitur  
                <a href="#weather-section" class="text-teal-600 font-semibold underline hover:text-teal-700">
                    Prediksi Cuaca
                </a>  
                biar kamu tidak berangkat kuliah sambil kehujanan.
            </p>
        </div>

        <!-- IMAGE -->
        <div class="z-10 flex justify-center">
            <div class="w-full overflow-hidden">
                <img src="/static/img/hero.jpeg" 
                     alt="Ilustrasi Quiz" 
                     class="w-full object-cover">
            </div>
        </div>

    </div>
</section>

<section id="weather-section" class="bg-teal-50 py-14 px-6 md:px-12">
    <div class="max-w-5xl mx-auto">

        <h2 class="text-3xl font-bold head-font mb-3 text-[#0a3234] text-center uppercase">
            Prediksi Cuaca
        </h2>

        {% if city %}
        <p class="text-center text-teal-700 mb-6 text-lg">
            Hasil untuk kota <span class="font-bold text-[#0a3234]">{{ city }}</span>
        </p>
        {% endif %}

        <!-- FORM -->
        <form method="POST" action=""
              class="flex flex-col md:flex-row gap-4 mb-12 justify-center"
              autocomplete="off">
            
            <input 
                type="text" 
                id="city" 
                name="city" 
                placeholder="Masukkan nama kota (contoh: Jakarta)"
                value="{{ city if city else '' }}"
                class="border border-teal-300 bg-white text-teal-900 p-3
                       focus:ring-1 focus:ring-teal-400 focus:outline-none w-full md:w-80 shadow-sm"
            >

            <!-- SUBMIT BUTTON -->
            <button 
                type="submit"
                class="
                    px-5 py-2.5 
                    font-semibold tracking-wide
                    bg-gradient-to-br from-teal-500 to-teal-600 
                    text-white 
                    shadow-md shadow-black/25
                    transition-all duration-300 ease-out
                    hover:from-teal-400 hover:to-teal-500
                    hover:-translate-y-0.5
                    active:scale-95
                "
            >
                Cek Cuaca
            </button>

            <!-- RESET BUTTON -->
            <a 
                href="/"
                class="
                    px-5 py-2.5 
                    font-semibold tracking-wide
                    bg-gradient-to-br from-gray-400 to-gray-500
                    text-white 
                    shadow-md shadow-black/25
                    transition-all duration-300 ease-out
                    hover:from-gray-400 hover:to-gray-400
                    hover:-translate-y-0.5
                    active:scale-95
                "
            >
                <i class="fa-solid fa-rotate"></i>
            </a>
        </form>

        <!-- FORECAST -->
        {% if forecast %}
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">

            {% for day in forecast %}
            <div class="bg-white border border-teal-200 p-5 rounded-xl shadow-md hover:shadow-lg transition
                        flex flex-col gap-3">

                <!-- HEADER -->
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-teal-600">{{ day.date }}</p>
                        <h4 class="text-lg font-semibold text-[#0a3234] head-font">{{ day.day_name }}</h4>
                    </div>

                    <div class="text-4xl">
                        {% if 'Hujan' in day.condition %}
                            <i class="fa-solid fa-cloud-showers-heavy text-teal-600"></i>
                        {% elif 'Cerah' in day.condition %}
                            <i class="fa-solid fa-sun text-yellow-500"></i>
                        {% elif 'Berawan' in day.condition %}
                            <i class="fa-solid fa-cloud text-gray-500"></i>
                        {% else %}
                            <i class="fa-solid fa-cloud-sun text-teal-500"></i>
                        {% endif %}
                    </div>
                </div>

                <div class="grid grid-cols-2 text-sm mt-1">
                    <div>
                        <p class="text-teal-600">Siang</p>
                        <p class="text-[#0a3234] text-lg font-semibold">{{ day.temp_day }}°C</p>
                    </div>
                    <div>
                        <p class="text-teal-600">Malam</p>
                        <p class="text-[#0a3234] text-lg font-semibold">{{ day.temp_night }}°C</p>
                    </div>
                </div>

                <p class="text-sm text-teal-700 mt-2">
                    {{ day.condition }}
                </p>
            </div>
            {% endfor %}

        </div>
        {% endif %}

    </div>
</section>

<script>
    {% if forecast %}
        window.location.hash = "weather-section";
    {% endif %}
</script>

{% endblock %}